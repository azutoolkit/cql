import{_ as l,o as e,c as n,x as s,a,S as o}from"./app.19d9338b.js";import"./chunks/theme.a19b6002.js";const f=JSON.parse('{"title":"Cql::Relations::Collection(Target, Pk)","description":"","frontmatter":{"title":"Cql::Relations::Collection(Target, Pk)"},"headers":[{"level":2,"title":"Constructors","slug":"constructors","link":"#constructors","children":[{"level":3,"title":"def new(key : Symbol, id : Pk, cascade : Bool = false, query : Cql::Query = (Cql::Query.new(Target.schema)).from(Target.table))","slug":"def-new-key-symbol-id-pk-cascade-bool-false-query-cql-query-cql-query-new-target-schema-from-target-table","link":"#def-new-key-symbol-id-pk-cascade-bool-false-query-cql-query-cql-query-new-target-schema-from-target-table","children":[]}]},{"level":2,"title":"Instance Methods","slug":"instance-methods","link":"#instance-methods","children":[{"level":3,"title":"def <<(record : Target)","slug":"def-record-target","link":"#def-record-target","children":[]},{"level":3,"title":"def all","slug":"def-all","link":"#def-all","children":[]},{"level":3,"title":"def clear","slug":"def-clear","link":"#def-clear","children":[]},{"level":3,"title":"def create(record : Target)","slug":"def-create-record-target","link":"#def-create-record-target","children":[]},{"level":3,"title":"def create","slug":"def-create","link":"#def-create","children":[]},{"level":3,"title":"def delete(record : Target)","slug":"def-delete-record-target","link":"#def-delete-record-target","children":[]},{"level":3,"title":"def delete(id : Pk)","slug":"def-delete-id-pk","link":"#def-delete-id-pk","children":[]},{"level":3,"title":"def empty?","slug":"def-empty","link":"#def-empty","children":[]},{"level":3,"title":"def exists?","slug":"def-exists","link":"#def-exists","children":[]},{"level":3,"title":"def find","slug":"def-find","link":"#def-find","children":[]},{"level":3,"title":"def ids","slug":"def-ids","link":"#def-ids","children":[]},{"level":3,"title":"def ids=(ids : Array(Pk))","slug":"def-ids-ids-array-pk","link":"#def-ids-ids-array-pk","children":[]},{"level":3,"title":"def reload","slug":"def-reload","link":"#def-reload","children":[]},{"level":3,"title":"def size","slug":"def-size","link":"#def-size","children":[]}]},{"level":2,"title":"Macros","slug":"macros","link":"#macros","children":[{"level":3,"title":"macro method_missing(call)","slug":"macro-method-missing-call","link":"#macro-method-missing-call","children":[]}]}],"relativePath":"main/Cql/Relations/Collection.md","lastUpdated":1723931959000}'),t={name:"main/Cql/Relations/Collection.md"},r=s("div",null,[s("h1",{id:"class-cql-relations-collection-target-pk",tabindex:"-1"},[a("class Cql::Relations::Collection(Target, Pk) "),s("a",{class:"header-anchor",href:"#class-cql-relations-collection-target-pk","aria-hidden":"true"},"#")]),s("p",null,[s("code",null,"Reference"),a(" < "),s("code",null,"Object")]),s("p",null,"A collection of records for a one to many relationship This class is used to manage the relationship between two tables through a foreign key column in the target table and provide methods to manage the association between the two tables and query records in the associated table based on the foreign key value of the parent record."),s("ul",null,[s("li",null,[s("strong",null,"param"),a(" : Target (Cql::Model) - The target model")]),s("li",null,[s("strong",null,"param"),a(" : Pk (Int64) - The primary key type")]),s("li",null,[s("strong",null,"return"),a(" : Nil")])]),s("p",null,[s("strong",null,"Example")]),s("div",{class:"language-crystal"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"crystal"),s("pre",{"v-pre":"",class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"class"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"User")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"include"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Model"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"User"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Int64"),s("span",{style:{color:"#89DDFF"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  "),s("span",{style:{color:"#82AAFF"}},"property"),s("span",{style:{color:"#BABED8"}}," id "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Int64")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  "),s("span",{style:{color:"#82AAFF"}},"property"),s("span",{style:{color:"#BABED8"}}," name "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"String")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  has_many "),s("span",{style:{color:"#89DDFF"}},":posts,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Post"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"foreign_key:"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},":user_id")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"end")]),a(`
`),s("span",{class:"line"})])])]),s("details",{class:"details custom-block"},[s("summary",null,"Table of Contents"),s("nav",{class:"table-of-contents"},[s("ul",null,[s("li",null,[s("a",{href:"#constructors"},"Constructors"),s("ul",null,[s("li",null,[s("a",{href:"#def-new-key-symbol-id-pk-cascade-bool-false-query-cql-query-cql-query-new-target-schema-from-target-table"},"def new(key : Symbol, id : Pk, cascade : Bool = false, query : Cql::Query = (Cql::Query.new(Target.schema)).from(Target.table))")])])]),s("li",null,[s("a",{href:"#instance-methods"},"Instance Methods"),s("ul",null,[s("li",null,[s("a",{href:"#def-record-target"},"def <<(record : Target)")]),s("li",null,[s("a",{href:"#def-all"},"def all")]),s("li",null,[s("a",{href:"#def-clear"},"def clear")]),s("li",null,[s("a",{href:"#def-create-record-target"},"def create(record : Target)")]),s("li",null,[s("a",{href:"#def-create"},"def create")]),s("li",null,[s("a",{href:"#def-delete-record-target"},"def delete(record : Target)")]),s("li",null,[s("a",{href:"#def-delete-id-pk"},"def delete(id : Pk)")]),s("li",null,[s("a",{href:"#def-empty"},"def empty?")]),s("li",null,[s("a",{href:"#def-exists"},"def exists?")]),s("li",null,[s("a",{href:"#def-find"},"def find")]),s("li",null,[s("a",{href:"#def-ids"},"def ids")]),s("li",null,[s("a",{href:"#def-ids-ids-array-pk"},"def ids=(ids : Array(Pk))")]),s("li",null,[s("a",{href:"#def-reload"},"def reload")]),s("li",null,[s("a",{href:"#def-size"},"def size")])])]),s("li",null,[s("a",{href:"#macros"},"Macros"),s("ul",null,[s("li",null,[s("a",{href:"#macro-method-missing-call"},"macro method_missing(call)")])])])])])])],-1),p=o(`<h2 id="constructors" tabindex="-1">Constructors <a class="header-anchor" href="#constructors" aria-hidden="true">#</a></h2><h3 id="def-new-key-symbol-id-pk-cascade-bool-false-query-cql-query-cql-query-new-target-schema-from-target-table" tabindex="-1">def new<code>(key : Symbol, id : Pk, cascade : Bool = false, query : Cql::Query = (Cql::Query.new(Target.schema)).from(Target.table))</code> <a class="header-anchor" href="#def-new-key-symbol-id-pk-cascade-bool-false-query-cql-query-cql-query-new-target-schema-from-target-table" aria-hidden="true">#</a></h3><p>Initialize the many-to-many association collection class</p><ul><li><strong>param</strong> : key (Symbol) - The key for the parent record</li><li><strong>param</strong> : id (Pk) - The id value for the parent record</li><li><strong>param</strong> : target_key (Symbol) - The key for the associated record</li><li><strong>param</strong> : cascade (Bool) - Delete associated records</li><li><strong>param</strong> : query (Cql::Query) - Query object</li><li><strong>return</strong> : ManyCollection</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ManyCollection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">:movie_id,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">:actor_id,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Query</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">schema</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">from</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">table</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="instance-methods" tabindex="-1">Instance Methods <a class="header-anchor" href="#instance-methods" aria-hidden="true">#</a></h2><h3 id="def-record-target" tabindex="-1">def &lt;&lt;<code>(record : Target)</code> <a class="header-anchor" href="#def-record-target" aria-hidden="true">#</a></h3><p>Create a new record and associate it with the parent record if it doesn&#39;t exist</p><ul><li><strong>param</strong> : record (Target)</li><li><strong>return</strong> : Array(Target)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Laurence Fishburne</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Laurence Fishburne&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-all" tabindex="-1">def all <a class="header-anchor" href="#def-all" aria-hidden="true">#</a></h3><p>Create a new record and associate it with the parent record</p><ul><li><strong>return</strong> : Array(Target)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Carrie-Anne Moss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Carrie-Anne Moss&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-clear" tabindex="-1">def clear <a class="header-anchor" href="#def-clear" aria-hidden="true">#</a></h3><p>Clears all associated records from the parent record and the database</p><ul><li><strong>return</strong> : [] of T</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Carrie-Anne Moss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">clear</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-create-record-target" tabindex="-1">def create<code>(record : Target)</code> <a class="header-anchor" href="#def-create-record-target" aria-hidden="true">#</a></h3><p>Create a new record and associate it with the parent record</p><ul><li><strong>param</strong> : attributes (Hash(Symbol, String | Int64))</li><li><strong>return</strong> : Array(Target)</li><li><strong>raise</strong> : Cql::Error</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create!</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hugo Weaving</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Hugo Weaving&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-create" tabindex="-1">def create <a class="header-anchor" href="#def-create" aria-hidden="true">#</a></h3><p>Create a new record and associate it with the parent record</p><ul><li><strong>param</strong> : attributes (Hash(Symbol, String | Int64))</li><li><strong>return</strong> : Array(Target)</li><li><strong>raise</strong> : Cql::Error</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Carrie-Anne Moss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Carrie-Anne Moss&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-delete-record-target" tabindex="-1">def delete<code>(record : Target)</code> <a class="header-anchor" href="#def-delete-record-target" aria-hidden="true">#</a></h3><p>Delete the associated record from the parent record if it exists</p><ul><li><strong>param</strong> : record (Target)</li><li><strong>return</strong> : Bool</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Carrie-Anne Moss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">of</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Actor</span></span>
<span class="line"></span></code></pre></div><h3 id="def-delete-id-pk" tabindex="-1">def delete<code>(id : Pk)</code> <a class="header-anchor" href="#def-delete-id-pk" aria-hidden="true">#</a></h3><p>Delete the associated record from the parent record if it exists</p><ul><li><strong>param</strong> : id (Pk)</li><li><strong>return</strong> : Bool</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Carrie-Anne Moss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-empty" tabindex="-1">def empty? <a class="header-anchor" href="#def-empty" aria-hidden="true">#</a></h3><p>Check if the association is empty or not</p><ul><li><strong>return</strong> : Bool</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">empty?</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"></span></code></pre></div><h3 id="def-exists" tabindex="-1">def exists? <a class="header-anchor" href="#def-exists" aria-hidden="true">#</a></h3><p>Check if the association exists or not based on the attributes provided</p><ul><li><strong>param</strong> : attributes (Hash(Symbol, String | Int64))</li><li><strong>return</strong> : Bool</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists?</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Keanu Reeves</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"></span></code></pre></div><h3 id="def-find" tabindex="-1">def find <a class="header-anchor" href="#def-find" aria-hidden="true">#</a></h3><p>Find associated records based on the attributes provided for the parent record</p><ul><li><strong>param</strong> : attributes (Hash(Symbol, String | Int64))</li><li><strong>return</strong> : Array(Target)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Keanu Reeves</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Keanu Reeves&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-ids" tabindex="-1">def ids <a class="header-anchor" href="#def-ids" aria-hidden="true">#</a></h3><p>Returns a list if primary keys for the associated records</p><ul><li><strong>return</strong> : Array(Pk)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ids</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-ids-ids-array-pk" tabindex="-1">def ids=<code>(ids : Array(Pk))</code> <a class="header-anchor" href="#def-ids-ids-array-pk" aria-hidden="true">#</a></h3><p>Associates the parent record with the records that match the primary keys provided</p><ul><li><strong>param</strong> : ids (Array(Pk))</li><li><strong>return</strong> : Array(Target)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ids </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Carrie-Anne Moss&quot;&gt;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   #&lt;Actor:0x00007f8b3b1b3f00 @id=2, @name=&quot;Hugo Weaving&quot;&gt;,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  #&lt;Actor:0x00007f8b3b1b3f00 @id=3, @name=&quot;Laurence Fishburne&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-reload" tabindex="-1">def reload <a class="header-anchor" href="#def-reload" aria-hidden="true">#</a></h3><p>Reload the association records from the database and return them</p><ul><li><strong>return</strong> : Array(Target)</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">reload</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#676E95;font-style:italic;">#&lt;Actor:0x00007f8b3b1b3f00 @id=1, @name=&quot;Carrie-Anne Moss&quot;&gt;]</span></span>
<span class="line"></span></code></pre></div><h3 id="def-size" tabindex="-1">def size <a class="header-anchor" href="#def-size" aria-hidden="true">#</a></h3><p>Returns the number of associated records for the parent record</p><ul><li><strong>return</strong> : Int64</li></ul><p><strong>Example</strong></p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">movie</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">actors</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">size</span></span>
<span class="line"><span style="color:#89DDFF;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span></code></pre></div><h2 id="macros" tabindex="-1">Macros <a class="header-anchor" href="#macros" aria-hidden="true">#</a></h2><h3 id="macro-method-missing-call" tabindex="-1">macro method_missing<code>(call)</code> <a class="header-anchor" href="#macro-method-missing-call" aria-hidden="true">#</a></h3><p>:::</p>`,80),c=[r,p];function i(d,y,D,F,B,h){return e(),n("div",null,c)}const A=l(t,[["render",i]]);export{f as __pageData,A as default};
