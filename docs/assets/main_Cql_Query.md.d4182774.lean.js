import{_ as a,o as e,c as n,x as s,a as l,S as o}from"./app.19d9338b.js";import"./chunks/theme.a19b6002.js";const f=JSON.parse('{"title":"Cql::Query","description":"","frontmatter":{"title":"Cql::Query"},"headers":[{"level":2,"title":"Constructors","slug":"constructors","link":"#constructors","children":[{"level":3,"title":"def new(schema : Schema)","slug":"def-new-schema-schema","link":"#def-new-schema-schema","children":[]}]},{"level":2,"title":"Instance Methods","slug":"instance-methods","link":"#instance-methods","children":[{"level":3,"title":"def aggr_columns","slug":"def-aggr-columns","link":"#def-aggr-columns","children":[]},{"level":3,"title":"def all(as as_kind)","slug":"def-all-as-as-kind","link":"#def-all-as-as-kind","children":[]},{"level":3,"title":"def all!(as as_kind)","slug":"def-all-as-as-kind-1","link":"#def-all-as-as-kind-1","children":[]},{"level":3,"title":"def avg(column : Symbol)","slug":"def-avg-column-symbol","link":"#def-avg-column-symbol","children":[]},{"level":3,"title":"def build","slug":"def-build","link":"#def-build","children":[]},{"level":3,"title":"def columns","slug":"def-columns","link":"#def-columns","children":[]},{"level":3,"title":"def count(column : Symbol = :*)","slug":"def-count-column-symbol","link":"#def-count-column-symbol","children":[]},{"level":3,"title":"def distinct","slug":"def-distinct","link":"#def-distinct","children":[]},{"level":3,"title":"def distinct?","slug":"def-distinct-1","link":"#def-distinct-1","children":[]},{"level":3,"title":"def each(as as_kind, &)","slug":"def-each-as-as-kind","link":"#def-each-as-as-kind","children":[]},{"level":3,"title":"def first(as as_kind)","slug":"def-first-as-as-kind","link":"#def-first-as-as-kind","children":[]},{"level":3,"title":"def first!(as as_kind)","slug":"def-first-as-as-kind-1","link":"#def-first-as-as-kind-1","children":[]},{"level":3,"title":"def from(*tbls : Symbol)","slug":"def-from-tbls-symbol","link":"#def-from-tbls-symbol","children":[]},{"level":3,"title":"def get(as as_kind)","slug":"def-get-as-as-kind","link":"#def-get-as-as-kind","children":[]},{"level":3,"title":"def group(*columns)","slug":"def-group-columns","link":"#def-group-columns","children":[]},{"level":3,"title":"def group_by","slug":"def-group-by","link":"#def-group-by","children":[]},{"level":3,"title":"def having","slug":"def-having","link":"#def-having","children":[]},{"level":3,"title":"def having","slug":"def-having-1","link":"#def-having-1","children":[]},{"level":3,"title":"def inner(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))","slug":"def-inner-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","link":"#def-inner-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","children":[]},{"level":3,"title":"def inner(table : Symbol, &)","slug":"def-inner-table-symbol","link":"#def-inner-table-symbol","children":[]},{"level":3,"title":"def joins","slug":"def-joins","link":"#def-joins","children":[]},{"level":3,"title":"def left(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))","slug":"def-left-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","link":"#def-left-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","children":[]},{"level":3,"title":"def left(table : Symbol, &)","slug":"def-left-table-symbol","link":"#def-left-table-symbol","children":[]},{"level":3,"title":"def limit(value : Int32)","slug":"def-limit-value-int32","link":"#def-limit-value-int32","children":[]},{"level":3,"title":"def limit","slug":"def-limit","link":"#def-limit","children":[]},{"level":3,"title":"def max(column : Symbol)","slug":"def-max-column-symbol","link":"#def-max-column-symbol","children":[]},{"level":3,"title":"def min(column : Symbol)","slug":"def-min-column-symbol","link":"#def-min-column-symbol","children":[]},{"level":3,"title":"def offset(value : Int32)","slug":"def-offset-value-int32","link":"#def-offset-value-int32","children":[]},{"level":3,"title":"def offset","slug":"def-offset","link":"#def-offset","children":[]},{"level":3,"title":"def order(*fields)","slug":"def-order-fields","link":"#def-order-fields","children":[]},{"level":3,"title":"def order","slug":"def-order","link":"#def-order","children":[]},{"level":3,"title":"def order_by","slug":"def-order-by","link":"#def-order-by","children":[]},{"level":3,"title":"def right(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))","slug":"def-right-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","link":"#def-right-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any","children":[]},{"level":3,"title":"def right(table : Symbol, &)","slug":"def-right-table-symbol","link":"#def-right-table-symbol","children":[]},{"level":3,"title":"def select(*columns : Symbol)","slug":"def-select-columns-symbol","link":"#def-select-columns-symbol","children":[]},{"level":3,"title":"def select","slug":"def-select","link":"#def-select","children":[]},{"level":3,"title":"def sum(column : Symbol)","slug":"def-sum-column-symbol","link":"#def-sum-column-symbol","children":[]},{"level":3,"title":"def tables","slug":"def-tables","link":"#def-tables","children":[]},{"level":3,"title":"def to_sql(gen = @schema.gen)","slug":"def-to-sql-gen-schema-gen","link":"#def-to-sql-gen-schema-gen","children":[]},{"level":3,"title":"def where(hash : Hash(Symbol, DB::Any))","slug":"def-where-hash-hash-symbol-db-any","link":"#def-where-hash-hash-symbol-db-any","children":[]},{"level":3,"title":"def where","slug":"def-where","link":"#def-where","children":[]},{"level":3,"title":"def where","slug":"def-where-1","link":"#def-where-1","children":[]},{"level":3,"title":"def where","slug":"def-where-2","link":"#def-where-2","children":[]}]},{"level":2,"title":"Macros","slug":"macros","link":"#macros","children":[{"level":3,"title":"macro method_missing(call)","slug":"macro-method-missing-call","link":"#macro-method-missing-call","children":[]}]}],"relativePath":"main/Cql/Query.md","lastUpdated":1723931959000}'),t={name:"main/Cql/Query.md"},r=s("div",null,[s("h1",{id:"class-cql-query",tabindex:"-1"},[l("class Cql::Query "),s("a",{class:"header-anchor",href:"#class-cql-query","aria-hidden":"true"},"#")]),s("p",null,[s("code",null,"Reference"),l(" < "),s("code",null,"Object")]),s("p",null,[l("The "),s("code",null,"Query"),l(" class is responsible for building SQL queries in a structured manner. It holds various components like selected columns, tables, conditions, and more. It provides methods to execute the query and return results.")]),s("p",null,[s("strong",null,"Example"),l(" Creating a new query")]),s("div",{class:"language-crystal"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"crystal"),s("pre",{"v-pre":"",class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"schema "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Schema"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#BABED8"}},"new")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Query"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"new"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#BABED8"}},"schema"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"query"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"select"),s("span",{style:{color:"#89DDFF"}},"(:name,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},":age)."),s("span",{style:{color:"#82AAFF"}},"from"),s("span",{style:{color:"#89DDFF"}},"(:users)."),s("span",{style:{color:"#82AAFF"}},"where"),s("span",{style:{color:"#89DDFF"}},"(name:"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"John"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"all"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"User"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"=>"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"[{"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"name"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"=>"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"John"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"age"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"=>"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#F78C6C"}},"30"),s("span",{style:{color:"#89DDFF"}},"}]")]),l(`
`),s("span",{class:"line"})])])]),s("p",null,[s("strong",null,"Example"),l(" Executing a query and iterating over results")]),s("div",{class:"language-crystal"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"crystal"),s("pre",{"v-pre":"",class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"schema "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Schema"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#BABED8"}},"new")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"query "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Query"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"new"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#BABED8"}},"schema"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"query"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"select"),s("span",{style:{color:"#89DDFF"}},"(:name,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},":age)."),s("span",{style:{color:"#82AAFF"}},"from"),s("span",{style:{color:"#89DDFF"}},"(:users)."),s("span",{style:{color:"#82AAFF"}},"where"),s("span",{style:{color:"#89DDFF"}},"(name:"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"John"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"each"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"User"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"do "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#BABED8"}},"user"),s("span",{style:{color:"#89DDFF"}},"|")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  "),s("span",{style:{color:"#82AAFF"}},"puts"),s("span",{style:{color:"#BABED8"}}," user"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#BABED8"}},"name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"end")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"=>"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"John")]),l(`
`),s("span",{class:"line"})])])]),s("details",{class:"details custom-block"},[s("summary",null,"Table of Contents"),s("nav",{class:"table-of-contents"},[s("ul",null,[s("li",null,[s("a",{href:"#constructors"},"Constructors"),s("ul",null,[s("li",null,[s("a",{href:"#def-new-schema-schema"},"def new(schema : Schema)")])])]),s("li",null,[s("a",{href:"#instance-methods"},"Instance Methods"),s("ul",null,[s("li",null,[s("a",{href:"#def-aggr-columns"},"def aggr_columns")]),s("li",null,[s("a",{href:"#def-all-as-as-kind"},"def all(as as_kind)")]),s("li",null,[s("a",{href:"#def-all-as-as-kind-1"},"def all!(as as_kind)")]),s("li",null,[s("a",{href:"#def-avg-column-symbol"},"def avg(column : Symbol)")]),s("li",null,[s("a",{href:"#def-build"},"def build")]),s("li",null,[s("a",{href:"#def-columns"},"def columns")]),s("li",null,[s("a",{href:"#def-count-column-symbol"},"def count(column : Symbol = :*)")]),s("li",null,[s("a",{href:"#def-distinct"},"def distinct")]),s("li",null,[s("a",{href:"#def-distinct-1"},"def distinct?")]),s("li",null,[s("a",{href:"#def-each-as-as-kind"},"def each(as as_kind, &)")]),s("li",null,[s("a",{href:"#def-first-as-as-kind"},"def first(as as_kind)")]),s("li",null,[s("a",{href:"#def-first-as-as-kind-1"},"def first!(as as_kind)")]),s("li",null,[s("a",{href:"#def-from-tbls-symbol"},"def from(*tbls : Symbol)")]),s("li",null,[s("a",{href:"#def-get-as-as-kind"},"def get(as as_kind)")]),s("li",null,[s("a",{href:"#def-group-columns"},"def group(*columns)")]),s("li",null,[s("a",{href:"#def-group-by"},"def group_by")]),s("li",null,[s("a",{href:"#def-having"},"def having")]),s("li",null,[s("a",{href:"#def-having-1"},"def having")]),s("li",null,[s("a",{href:"#def-inner-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any"},"def inner(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))")]),s("li",null,[s("a",{href:"#def-inner-table-symbol"},"def inner(table : Symbol, &)")]),s("li",null,[s("a",{href:"#def-joins"},"def joins")]),s("li",null,[s("a",{href:"#def-left-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any"},"def left(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))")]),s("li",null,[s("a",{href:"#def-left-table-symbol"},"def left(table : Symbol, &)")]),s("li",null,[s("a",{href:"#def-limit-value-int32"},"def limit(value : Int32)")]),s("li",null,[s("a",{href:"#def-limit"},"def limit")]),s("li",null,[s("a",{href:"#def-max-column-symbol"},"def max(column : Symbol)")]),s("li",null,[s("a",{href:"#def-min-column-symbol"},"def min(column : Symbol)")]),s("li",null,[s("a",{href:"#def-offset-value-int32"},"def offset(value : Int32)")]),s("li",null,[s("a",{href:"#def-offset"},"def offset")]),s("li",null,[s("a",{href:"#def-order-fields"},"def order(*fields)")]),s("li",null,[s("a",{href:"#def-order"},"def order")]),s("li",null,[s("a",{href:"#def-order-by"},"def order_by")]),s("li",null,[s("a",{href:"#def-right-table-symbol-on-hash-cql-basecolumn-cql-basecolumn-db-any"},"def right(table : Symbol, on : Hash(Cql::BaseColumn, Cql::BaseColumn | DB::Any))")]),s("li",null,[s("a",{href:"#def-right-table-symbol"},"def right(table : Symbol, &)")]),s("li",null,[s("a",{href:"#def-select-columns-symbol"},"def select(*columns : Symbol)")]),s("li",null,[s("a",{href:"#def-select"},"def select")]),s("li",null,[s("a",{href:"#def-sum-column-symbol"},"def sum(column : Symbol)")]),s("li",null,[s("a",{href:"#def-tables"},"def tables")]),s("li",null,[s("a",{href:"#def-to-sql-gen-schema-gen"},"def to_sql(gen = @schema.gen)")]),s("li",null,[s("a",{href:"#def-where-hash-hash-symbol-db-any"},"def where(hash : Hash(Symbol, DB::Any))")]),s("li",null,[s("a",{href:"#def-where"},"def where")]),s("li",null,[s("a",{href:"#def-where-1"},"def where")]),s("li",null,[s("a",{href:"#def-where-2"},"def where")])])]),s("li",null,[s("a",{href:"#macros"},"Macros"),s("ul",null,[s("li",null,[s("a",{href:"#macro-method-missing-call"},"macro method_missing(call)")])])])])])])],-1),p=o("",176),c=[r,p];function i(y,d,D,F,u,h){return e(),n("div",null,c)}const B=a(t,[["render",i]]);export{f as __pageData,B as default};
