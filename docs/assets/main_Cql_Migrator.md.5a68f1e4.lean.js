import{_ as e,o as n,c as l,x as s,a,S as t}from"./app.19d9338b.js";import"./chunks/theme.a19b6002.js";const F=JSON.parse('{"title":"Cql::Migrator","description":"","frontmatter":{"title":"Cql::Migrator"},"headers":[{"level":2,"title":"Constants","slug":"constants","link":"#constants","children":[{"level":3,"title":"Log","slug":"log","link":"#log","children":[]}]},{"level":2,"title":"Constructors","slug":"constructors","link":"#constructors","children":[{"level":3,"title":"def new(schema : Schema)","slug":"def-new-schema-schema","link":"#def-new-schema-schema","children":[]}]},{"level":2,"title":"Class Methods","slug":"class-methods","link":"#class-methods","children":[{"level":3,"title":"def migrations","slug":"def-migrations","link":"#def-migrations","children":[]},{"level":3,"title":"def migrations=(migrations : Array(Migration.class))","slug":"def-migrations-migrations-array-migration-class","link":"#def-migrations-migrations-array-migration-class","children":[]}]},{"level":2,"title":"Instance Methods","slug":"instance-methods","link":"#instance-methods","children":[{"level":3,"title":"def applied_migrations","slug":"def-applied-migrations","link":"#def-applied-migrations","children":[]},{"level":3,"title":"def down(steps : Int32 = Migrator.migrations.size)","slug":"def-down-steps-int32-migrator-migrations-size","link":"#def-down-steps-int32-migrator-migrations-size","children":[]},{"level":3,"title":"def down_to(version : Int64)","slug":"def-down-to-version-int64","link":"#def-down-to-version-int64","children":[]},{"level":3,"title":"def last","slug":"def-last","link":"#def-last","children":[]},{"level":3,"title":"def pending_migrations","slug":"def-pending-migrations","link":"#def-pending-migrations","children":[]},{"level":3,"title":"def print_applied_migrations","slug":"def-print-applied-migrations","link":"#def-print-applied-migrations","children":[]},{"level":3,"title":"def print_pending_migrations","slug":"def-print-pending-migrations","link":"#def-print-pending-migrations","children":[]},{"level":3,"title":"def print_rolled_back_migrations(m : Array(Migration.class))","slug":"def-print-rolled-back-migrations-m-array-migration-class","link":"#def-print-rolled-back-migrations-m-array-migration-class","children":[]},{"level":3,"title":"def redo","slug":"def-redo","link":"#def-redo","children":[]},{"level":3,"title":"def repo","slug":"def-repo","link":"#def-repo","children":[]},{"level":3,"title":"def rollback(steps : Int32 = 1)","slug":"def-rollback-steps-int32-1","link":"#def-rollback-steps-int32-1","children":[]},{"level":3,"title":"def schema","slug":"def-schema","link":"#def-schema","children":[]},{"level":3,"title":"def up(steps : Int32 = Migrator.migrations.size)","slug":"def-up-steps-int32-migrator-migrations-size","link":"#def-up-steps-int32-migrator-migrations-size","children":[]},{"level":3,"title":"def up_to(version : Int64)","slug":"def-up-to-version-int64","link":"#def-up-to-version-int64","children":[]}]}],"relativePath":"main/Cql/Migrator.md","lastUpdated":1723931959000}'),i={name:"main/Cql/Migrator.md"},o=s("div",null,[s("h1",{id:"class-cql-migrator",tabindex:"-1"},[a("class Cql::Migrator "),s("a",{class:"header-anchor",href:"#class-cql-migrator","aria-hidden":"true"},"#")]),s("p",null,[s("code",null,"Reference"),a(" < "),s("code",null,"Object")]),s("p",null,[a("The "),s("code",null,"Migrator"),a(" class is used to manage migrations and provides methods to apply, rollback, and redo migrations. The "),s("code",null,"Migrator"),a(" class also provides methods to list applied and pending migrations. "),s("strong",null,"Example"),a(" Creating a new migrator")]),s("div",{class:"language-crystal"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"crystal"),s("pre",{"v-pre":"",class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"schema "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Schema"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"build"),s("span",{style:{color:"#89DDFF"}},"(:northwind,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"sqlite3://db.sqlite3"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"do "),s("span",{style:{color:"#89DDFF"}},"|"),s("span",{style:{color:"#BABED8"}},"s"),s("span",{style:{color:"#89DDFF"}},"|")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  table "),s("span",{style:{color:"#89DDFF"}},":schema_migrations"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"do")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"    primary "),s("span",{style:{color:"#89DDFF"}},":id,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Int32")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"    column "),s("span",{style:{color:"#89DDFF"}},":name,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"String")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"    column "),s("span",{style:{color:"#89DDFF"}},":version,"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Int64"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"index:"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FF9CAC"}},"true"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#89DDFF"}},"unique:"),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FF9CAC"}},"true")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"    timestamps")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"end")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"end")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"migrator "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#BABED8"}}," "),s("span",{style:{color:"#FFCB6B"}},"Cql"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Migrator"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"new"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#BABED8"}},"schema"),s("span",{style:{color:"#89DDFF"}},")")]),a(`
`),s("span",{class:"line"})])])]),s("p",null,[s("strong",null,"Example"),a(" Applying migrations")]),s("div",{class:"language-crystal"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"crystal"),s("pre",{"v-pre":"",class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"migrator"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#BABED8"}},"up")]),a(`
`),s("span",{class:"line"})])])]),s("details",{class:"details custom-block"},[s("summary",null,"Table of Contents"),s("nav",{class:"table-of-contents"},[s("ul",null,[s("li",null,[s("a",{href:"#constants"},"Constants"),s("ul",null,[s("li",null,[s("a",{href:"#log"},"Log")])])]),s("li",null,[s("a",{href:"#constructors"},"Constructors"),s("ul",null,[s("li",null,[s("a",{href:"#def-new-schema-schema"},"def new(schema : Schema)")])])]),s("li",null,[s("a",{href:"#class-methods"},"Class Methods"),s("ul",null,[s("li",null,[s("a",{href:"#def-migrations"},"def migrations")]),s("li",null,[s("a",{href:"#def-migrations-migrations-array-migration-class"},"def migrations=(migrations : Array(Migration.class))")])])]),s("li",null,[s("a",{href:"#instance-methods"},"Instance Methods"),s("ul",null,[s("li",null,[s("a",{href:"#def-applied-migrations"},"def applied_migrations")]),s("li",null,[s("a",{href:"#def-down-steps-int32-migrator-migrations-size"},"def down(steps : Int32 = Migrator.migrations.size)")]),s("li",null,[s("a",{href:"#def-down-to-version-int64"},"def down_to(version : Int64)")]),s("li",null,[s("a",{href:"#def-last"},"def last")]),s("li",null,[s("a",{href:"#def-pending-migrations"},"def pending_migrations")]),s("li",null,[s("a",{href:"#def-print-applied-migrations"},"def print_applied_migrations")]),s("li",null,[s("a",{href:"#def-print-pending-migrations"},"def print_pending_migrations")]),s("li",null,[s("a",{href:"#def-print-rolled-back-migrations-m-array-migration-class"},"def print_rolled_back_migrations(m : Array(Migration.class))")]),s("li",null,[s("a",{href:"#def-redo"},"def redo")]),s("li",null,[s("a",{href:"#def-repo"},"def repo")]),s("li",null,[s("a",{href:"#def-rollback-steps-int32-1"},"def rollback(steps : Int32 = 1)")]),s("li",null,[s("a",{href:"#def-schema"},"def schema")]),s("li",null,[s("a",{href:"#def-up-steps-int32-migrator-migrations-size"},"def up(steps : Int32 = Migrator.migrations.size)")]),s("li",null,[s("a",{href:"#def-up-to-version-int64"},"def up_to(version : Int64)")])])])])])])],-1),r=t("",57),p=[o,r];function c(d,g,h,m,f,u){return n(),l("div",null,p)}const B=e(i,[["render",c]]);export{F as __pageData,B as default};
