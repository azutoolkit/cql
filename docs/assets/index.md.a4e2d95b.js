import{_ as s,o as n,c as a,S as l}from"./app.70057064.js";import"./chunks/theme.88596d17.js";const A=JSON.parse('{"title":"Home","description":"","frontmatter":{"title":"Home"},"headers":[{"level":2,"title":"Features","slug":"features","link":"#features","children":[]},{"level":2,"title":"Installation","slug":"installation","link":"#installation","children":[]},{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[{"level":3,"title":"1. Define a Schema","slug":"_1-define-a-schema","link":"#_1-define-a-schema","children":[]},{"level":3,"title":"2. Executing Queries","slug":"_2-executing-queries","link":"#_2-executing-queries","children":[]},{"level":3,"title":"3. Inserting Data","slug":"_3-inserting-data","link":"#_3-inserting-data","children":[]},{"level":3,"title":"4. Updating Data","slug":"_4-updating-data","link":"#_4-updating-data","children":[]},{"level":3,"title":"5. Deleting Data","slug":"_5-deleting-data","link":"#_5-deleting-data","children":[]},{"level":3,"title":"6. Using the Repository Pattern","slug":"_6-using-the-repository-pattern","link":"#_6-using-the-repository-pattern","children":[]},{"level":3,"title":"7. Active Record Pattern","slug":"_7-active-record-pattern","link":"#_7-active-record-pattern","children":[]}]},{"level":2,"title":"Documentation","slug":"documentation","link":"#documentation","children":[]},{"level":2,"title":"Contributing","slug":"contributing","link":"#contributing","children":[]},{"level":2,"title":"License","slug":"license","link":"#license","children":[]},{"level":2,"title":"Acknowledgments","slug":"acknowledgments","link":"#acknowledgments","children":[]}],"relativePath":"index.md","lastUpdated":1723933892000}'),p={name:"index.md"},e=l(`<p><a href="https://github.com/azutoolkit/cql/actions/workflows/crystal.yml" target="_blank" rel="noreferrer"><img src="https://github.com/azutoolkit/cql/actions/workflows/crystal.yml/badge.svg" alt="Crystal CI"></a></p><h1 id="cql" tabindex="-1">CQL <a class="header-anchor" href="#cql" aria-hidden="true">#</a></h1><p>CQL is a powerful library designed to simplify and enhance the management and execution of SQL queries in the Crystal programming language. It provides utilities for building, validating, and executing SQL statements, ensuring better performance and code maintainability.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-hidden="true">#</a></h2><ul><li><strong>Query Builder</strong>: Programmatically create complex SQL queries.</li><li><strong>Insert, Update, Delete Operations</strong>: Perform CRUD operations with ease.</li><li><strong>Repository Pattern</strong>: Manage your data more effectively using <code>Cql::Repository(T)</code>.</li><li><strong>Active Record Pattern</strong>: Work with your data models using <code>Cql::Record(T)</code>.</li></ul><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-hidden="true">#</a></h2><p>Add this to your application&#39;s <code>shard.yml</code>:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">cql</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">github</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">azutoolkit/cql</span></span>
<span class="line"></span></code></pre></div><p>Then, run the following command to install the dependencies:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">shards</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"></span></code></pre></div><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><h3 id="_1-define-a-schema" tabindex="-1">1. Define a Schema <a class="header-anchor" href="#_1-define-a-schema" aria-hidden="true">#</a></h3><p>Define the schema for your database tables:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Schema</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">build</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">:acme_db,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">adapter:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Adapter</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Postgres</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">uri:</span><span style="color:#BABED8;"> ENV[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DATABASE_URL</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">  table </span><span style="color:#89DDFF;">:movies</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">    primary </span><span style="color:#89DDFF;">:id,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">auto_increment:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">    text </span><span style="color:#89DDFF;">:title</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  table </span><span style="color:#89DDFF;">:screenplays</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">    primary </span><span style="color:#89DDFF;">:id,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">auto_increment:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">    bigint </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"><span style="color:#BABED8;">    text </span><span style="color:#89DDFF;">:content</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  table </span><span style="color:#89DDFF;">:actors</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">    primary </span><span style="color:#89DDFF;">:id,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">auto_increment:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">    text </span><span style="color:#89DDFF;">:name</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  table </span><span style="color:#89DDFF;">:directors</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">    primary </span><span style="color:#89DDFF;">:id,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">auto_increment:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">    bigint </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"><span style="color:#BABED8;">    text </span><span style="color:#89DDFF;">:name</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  table </span><span style="color:#89DDFF;">:movies_actors</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#BABED8;">    primary </span><span style="color:#89DDFF;">:id,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">auto_increment:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#BABED8;">    bigint </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"><span style="color:#BABED8;">    bigint </span><span style="color:#89DDFF;">:actor_id</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-executing-queries" tabindex="-1">2. Executing Queries <a class="header-anchor" href="#_2-executing-queries" aria-hidden="true">#</a></h3><p>With the schema in place, you can start executing queries:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">q </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">AcmeDB</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">query</span></span>
<span class="line"><span style="color:#BABED8;">user </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> q</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from</span><span style="color:#89DDFF;">(:users).</span><span style="color:#82AAFF;">where</span><span style="color:#89DDFF;">(id:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">first!</span><span style="color:#89DDFF;">(as:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">puts</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">name</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-inserting-data" tabindex="-1">3. Inserting Data <a class="header-anchor" href="#_3-inserting-data" aria-hidden="true">#</a></h3><p>Insert new records into the database:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">q </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Query</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">schema</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">q</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">insert</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">into</span><span style="color:#89DDFF;">(:users)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Jane Doe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">email:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jane@example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">last_insert_id</span></span>
<span class="line"></span></code></pre></div><h3 id="_4-updating-data" tabindex="-1">4. Updating Data <a class="header-anchor" href="#_4-updating-data" aria-hidden="true">#</a></h3><p>Update existing records:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">u </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">AcmeDB</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">update</span></span>
<span class="line"><span style="color:#BABED8;">u</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">table</span><span style="color:#89DDFF;">(:users)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Jane Smith</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">where</span><span style="color:#89DDFF;">(id:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">commit</span></span>
<span class="line"></span></code></pre></div><h3 id="_5-deleting-data" tabindex="-1">5. Deleting Data <a class="header-anchor" href="#_5-deleting-data" aria-hidden="true">#</a></h3><p>Delete records from the database:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">d </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">AcmeDB</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">delete</span></span>
<span class="line"><span style="color:#BABED8;">d</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from</span><span style="color:#89DDFF;">(:users).</span><span style="color:#82AAFF;">where</span><span style="color:#89DDFF;">(id:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">).</span><span style="color:#BABED8;">commit</span></span>
<span class="line"></span></code></pre></div><h3 id="_6-using-the-repository-pattern" tabindex="-1">6. Using the Repository Pattern <a class="header-anchor" href="#_6-using-the-repository-pattern" aria-hidden="true">#</a></h3><p>Utilize the repository pattern for organized data management:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">user_repository </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Repository</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">new</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">schema</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:users)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Create a new user</span></span>
<span class="line"><span style="color:#BABED8;">user_repository</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#89DDFF;">(name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Jane Doe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">email:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jane@example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Fetch all users</span></span>
<span class="line"><span style="color:#BABED8;">users </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> user_repository</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">all</span></span>
<span class="line"><span style="color:#BABED8;">users</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">each </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;">user</span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">puts</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">name </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Find a user by ID</span></span>
<span class="line"><span style="color:#BABED8;">user </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> user_repository</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find!</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">puts</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Update a user by ID</span></span>
<span class="line"><span style="color:#BABED8;">user_repository</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">name:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Jane Smith</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="_7-active-record-pattern" tabindex="-1">7. Active Record Pattern <a class="header-anchor" href="#_7-active-record-pattern" aria-hidden="true">#</a></h3><p>Work with your data using the Active Record pattern:</p><div class="language-crystal"><button title="Copy Code" class="copy"></button><span class="lang">crystal</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">A</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">struct</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Actor</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Relations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  define </span><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:actors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">?</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(@</span><span style="color:#BABED8;">name </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">struct</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Movie</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Movie</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Relations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  define </span><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movies</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  has_one </span><span style="color:#89DDFF;">:screenplay,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Screenplay</span></span>
<span class="line"><span style="color:#BABED8;">  many_to_many </span><span style="color:#89DDFF;">:actors,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Actor</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">join_through:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movies_actors</span></span>
<span class="line"><span style="color:#BABED8;">  has_many </span><span style="color:#89DDFF;">:directors,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Director</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">foreign_key:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">?</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> title </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(@</span><span style="color:#BABED8;">title </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">struct</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Director</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Director</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Relations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  define </span><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:directors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">?</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span></span>
<span class="line"><span style="color:#BABED8;">  belongs_to </span><span style="color:#89DDFF;">:movie,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">foreign_key:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(@</span><span style="color:#BABED8;">name </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">struct</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Screenplay</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Screenplay</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Relations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  define </span><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:screenplays</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  belongs_to </span><span style="color:#89DDFF;">:movie,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">foreign_key:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movie_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">?</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> content </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(@</span><span style="color:#BABED8;">movie_id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">, </span><span style="color:#89DDFF;">@</span><span style="color:#BABED8;">content </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">String</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">struct</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">MoviesActors</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">include</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Cql</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">MoviesActors</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  define </span><span style="color:#FFCB6B;">AcmeDB2</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">:movies_actors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">?</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> movie_id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#82AAFF;">getter</span><span style="color:#BABED8;"> actor_id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  # has_many :actors, Actor, :actor_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(@</span><span style="color:#BABED8;">movie_id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#BABED8;">, </span><span style="color:#89DDFF;">@</span><span style="color:#BABED8;">actor_id </span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">Int64</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span></code></pre></div><h2 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-hidden="true">#</a></h2><p>Detailed API documentation is available at <a href="https://azutoolkit.github.io/cql/" target="_blank" rel="noreferrer">CQL Documentation</a>.</p><h2 id="contributing" tabindex="-1">Contributing <a class="header-anchor" href="#contributing" aria-hidden="true">#</a></h2><p>Contributions are welcome! To contribute:</p><ol><li>Fork this repository.</li><li>Create your feature branch: <code>git checkout -b my-new-feature</code>.</li><li>Commit your changes: <code>git commit -am &#39;Add some feature&#39;</code>.</li><li>Push to the branch: <code>git push origin my-new-feature</code>.</li><li>Create a new Pull Request.</li></ol><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-hidden="true">#</a></h2><p>This project is licensed under the MIT License. See the <a href="./LICENSE.html">LICENSE</a> file for details.</p><h2 id="acknowledgments" tabindex="-1">Acknowledgments <a class="header-anchor" href="#acknowledgments" aria-hidden="true">#</a></h2><p>Thanks to all the contributors who helped in the development of this project.</p>`,41),o=[e];function t(c,r,i,D,y,F){return n(),a("div",null,o)}const E=s(p,[["render",t]]);export{A as __pageData,E as default};
